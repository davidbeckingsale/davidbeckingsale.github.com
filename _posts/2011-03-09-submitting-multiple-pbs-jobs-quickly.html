--- 
layout: post
title: Submitting multiple PBS jobs quickly
tags: 
- MPI
- Programming
status: publish
type: post
published: true
meta: 
  _edit_last: "1"
  _syntaxhighlighter_encoded: "1"
  _pingme: "1"
  _encloseme: "1"
  _wp_old_slug: ""
---
When you're running parallel programs you will often want to submit lots of jobs with slightly different parameters, for example, different numbers of nodes or different input parameters.

It gets really tedious to do this by hand, so what I have been doing recently is writing bash scripts to submit the jobs for me. The easiest way to do this is to put your submission command inside a for loop and then use the counter variable for your varying parameters. The following snippet is a script to submit lots of copies of the same job, but running on different numbers of nodes.

[code light="true"]
#!/bin/bash

for a in {1..25}
do
    echo &quot;cd $PBS_O_WORKDIR&quot; &gt;&gt; fw$a.sh
    echo &gt;&gt; fw$a.sh
    echo &quot;mpirun graph-parallel 3000&quot; &gt;&gt; fw$a.sh

    qsub -V -l nodes=$a:ppn=1 fw$a.sh
done
[/code]

I use echo to build up the file containing the job, and at the end of each submission, add it to the queue using qsub. If you are having to submit a lot of jobs this is definitely something to look in to.
